<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>张炜的个人简历</title>
    <link rel="stylesheet" href="./c.css">
    <script src="//at.alicdn.com/t/font_523765_urhfowf5mgr5dn29.js"></script>
    <style type="text/css">
        .loading{ width: 200px; height: 200px; position: relative; }
        .loading::before,.loading::after{ content: ''; position: absolute; width: 0px; height: 0px; background: black; border-radius: 50%; top: 0; left: 0; bottom: 0; right: 0; margin: auto; animation: s 1.5s linear infinite; }
        .loading::after{ animation-delay: 0.75s; }
        @keyframes s{ 
          0%{ width: 0px; height: 0px; opacity: 1; }
          100%{ width: 100px; height: 100px; opacity: 0; }
        }
        .icon { width: 1em; height: 1em; vertical-align: -0.15em; fill: currentColor; overflow: hidden; }
        .site-welcome{ display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #888; z-index: 1; justify-content: center; align-items: center; }
        .site-welcome.active{ display: flex; }
    </style>
</head>
<body>
    <div id="siteWelcome" class="site-welcome active">
        <div class="loading"></div>
    </div>
    <div id="topNavBar" class="topNavBar">
        <div class="topNavBar-inner clearfix">
            <a class="logo" style="float:left">
                <span class="rs">RS</span>
                <span class="card">card</span>
            </a>
            <nav class="menu" style="float:right">
                <ul class="clearfix">
                <li>
                    <a href="#userCard">关于</a>
                    
                <li><a href="#siteSkills">技能</a></li>
                <li>
                    <a href="#siteWorks">作品</a>
                    
                </li>
                </li>
                <li><a href="#">博客</a></li>
                <li><a href="#">日历</a></li>
                <li><a href="#">联系方式</a></li>
                <li><a href="#">其他</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- 这里做首页的背景图了 -->
    <div class="banner">
        <div class="mask"></div>
    </div>

    <main id="siteAbout">
        <div data-x id="userCard" class="userCard">
            <div class="pictureAndText clearfix">
                <div class="picture" style="float:left">
                    <img src="./img/WechatIMG142.jpg" width="250px" height="300px" alt="头像">
                </div>
                <div class="text" style="float:left">
                        <span class="welcome">Hello
                             <span class="triangle"></span>
                        </span>
                        <h1>张炜</h1>
                        <p class="name size">软件开发工程师</p>
                        <hr>
                        <dl class="clearfix">
                            <dt>年龄</dt>
                            <dd>22</dd>
                            <dt>所在城市</dt>
                            <dd>武汉</dd>
                            <dt>邮箱</dt>
                            <dd>zhangweixuevue@163.com</dd>
                            <dt>手机</dt>
                            <dd>18271869107</dd>
                        </dl>
                </div>
            </div>

            <footer class="footerView">
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-ziyuan"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-wangzherongyao"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-wei_xing"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-dingding"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                    <use xlink:href="#icon-qq"></use>
                            </svg>
                    </a>
            </footer>
        </div>

        <p class="downloadResume-wrapper">

            <a class="downloadResume" href="./a.pdf" target="_blank" download>下载 PDF 简历</a>
        </p>

        <p class="selfIntroduction">
            张炜, 菜鸟前端开发工程师
            <br> 技能: 前端开发.
        </p>
    </main>

    <!--技能区域模块-->
    <section data-x id="siteSkills" class="skills">
        <h2>技能</h2>
        <ol class="clearfix">
            <li>
                <div style="padding: 10px">
                    <h3>HTML 5 &amp; CSS 3</h3>
                    <div class="progressBar">
                        <div class="progress first"></div>
                    </div>
                </div>
            </li>
            <li>
                <div style="padding: 10px">
                <h3>JavaScript</h3>
                <div class="progressBar">
                    <div class="progress"></div>
                </div>
                </div>
            </li>
            <li>
                <div style="padding: 10px">
                <h3>jQuery</h3>
                <div class="progressBar">
                    <div class="progress first"></div>
                </div>
                </div>
            </li>
            <li>
                <div style="padding: 10px">
                <h3>vue</h3>
                <div class="progressBar">
                    <div class="progress first"></div>
                </div>
                </li>
            </div>
            <li>
                <div style="padding: 10px">
                <h3>React</h3>
                <div class="progressBar">
                    <div class="progress"></div>
                </div>
                </div>
            </li>
            </li>
            <li>
                <div style="padding: 10px">
                <h3>HTTP</h3>
                <div class="progressBar">
                    <div class="progress"></div>
                </div>
            </div>
            </li>
        </ol>
    </section>
    <section data-x id="siteWorks" class="portfolio">
        <h2>作品</h2>
        <nav>
            <ol class="clearfix">
                <li id="protfolioAll">所有</li>
                <li id="protfolioFrameworke">框架</li>
                <li id="protfolioNative">原生 and CSS</li>
            </ol>
            <div id="protfolioBar" class="bar state-1">
                <div class="bar-inner">

                </div>
            </div>
        </nav>
        <script>
            protfolioAll.onclick = function () {
                protfolioBar.className = 'bar state-1'
            }
            protfolioFrameworke.onclick = function () {
                protfolioBar.className = 'bar state-2'
            }
            protfolioNative.onclick = function () {
                protfolioBar.className = 'bar state-3'
            }
        </script>

        <div class="works" style="height: 597px;">
            <div class="big" style="top: 0; left: 0;">
                <img src="./img/1.jpg" alt="作品1">
            </div>
            <div class="small" style="top: 0; left: 645px;">
                <img src="./img/a.jpg" alt="作品2">
            </div>
            <div class="small" style="top: 312px; left: 645px;">
                <img src="./img/3.jpg" alt="作品3">
            </div>
        </div>
    </section>
    <!-- 添加scr动画类 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.1.1/Tween.min.js"></script>
    <script>
        setTimeout(function(){
        siteWelcome.classList.remove('active')    
        },1000)
        window.onscroll = function(){
            if(window.scrollY > 0){
               topNavBar.classList.add('sticky')
            }else{
               topNavBar.classList.remove('sticky')
            }

            //之后滚动的时候上面标签默认高亮
            let speciaTags = document.querySelectorAll('[data-x]')
            //
            var one = 0
            var two = 0
            var three = 0
            for(let i = 0;i<speciaTags.length;i++){
                //这里有个逻辑 判断谁的值距离window.scrollY最近就先显示对应的值高亮
                if (i==0){
                    one = Math.abs(speciaTags[i].offsetTop - window.scrollY)
                } else if (i==1) {
                    two = Math.abs(speciaTags[i].offsetTop - window.scrollY)
                } else if (i==2) {
                    three = Math.abs(speciaTags[i].offsetTop - window.scrollY)
                }
            }

            let minIndex = 0
            if (one < two && one < three) {
                minIndex = 0   
            } else if  (two < one && two < three) {
                minIndex = 1
            } else if  (three < two && three < one) {
                minIndex = 2
            }

            for (let i = 0;i<3;i++){
                speciaTags[i].classList.remove('active')
            }
            speciaTags[minIndex].classList.add('active')

            let id = speciaTags[minIndex].id
            console.log(id)
            //找标签
            let a = document.querySelector('a[href="#' + id + '"]')
            let li = a.parentNode
            let brothersAndMe = li.parentNode.children
            for (let i =0;i<brothersAndMe.length;i++){
                brothersAndMe[i].classList.remove('active')
            }
            li.classList.add('active')
        }

        let aTags = document.querySelectorAll('nav.menu > ul > li > a')
        function animate(time) {
            requestAnimationFrame(animate);
            TWEEN.update(time);
        }
        requestAnimationFrame(animate);
        
        for(let i=0; i<aTags.length; i++){
        aTags[i].onclick = function(x){
            x.preventDefault()   
            let a = x.currentTarget
            let href = a.getAttribute('href') //'#siteAbout'
            let element = document.querySelector(href)
            let top = element.offsetTop
            let currentTop = window.scrollY  //当前位置
            let targetTop = top - 80         //需要滚动位置
            let s = targetTop - currentTop   // 路程
            var coords = { y: currentTop};   // 起始位置
            var t = Math.abs((s/100)*300)    // 时间
            if(t>500){ t = 500 }
            var tween = new TWEEN.Tween(coords) // 起始位置
                .to({ y: targetTop}, t)             // 结束位置 和 时间
                .easing(TWEEN.Easing.Cubic.InOut)   // 缓动类型
                .onUpdate(function() {
                    // coords.y 已经变了
                    window.scrollTo(0,coords.y)     // 如何更新界面
                })
            .start(); // 开始缓动
            }
        }
        // let aTags = document.querySelectorAll('nav.menu > ul > li > a')
        // function animate(time) {
        //     requestAnimationFrame(animate);
        // TWEEN.update(time);
        // }
        // requestAnimationFrame(animate);

        // for (let i=0; i<aTags.length; i++) {
        //    aTags[i].onclick = function(a){
        //        a.preventDefault()//禁止默认点击
        //        let target = a.currentTarget
        //        let href = target.getAttribute('href')//获取对应标签
        //        let element = document.querySelector(href)
        //        let top = element.offsetTop     //这里的top是点击该标签对应的高度

        //     //    let currentTop = window.screenY //当前y坐标
        //     //    let targetTop = top - 80        //要滚动的坐标
        //     //    let s = targetTop - currentTop  //需要滚动的距离  
        //     //    var t = Math.abs((s/100)*300)   //滚动的时间
        //     //    if (t>500){ t = 500}            //如果时间比0.5秒还要大 就不让他滚这么久
        //     //    var tween = new TWEEN.Tween({ y: currentTop})  //起始位置
        //     //         .to({ y:targetTop}, t)     //结束位置  和时间
        //     //         .easing(TWEEN.easing.Cubic.InOut) //缓动类型
        //     //         .onUpdate(function(){
        //     //             //y轴已经在变化
        //     //             window.scrollTo(0,coords.y) //跟新界面
        //     //         })
        //     //         .start()
        //        let n = 25 //动多少次
        //        let duration = 500 / n //多长时间动完
        //        let currentTop = window.scrollY //获取当前的y坐标
        //        let scrollTop = top - 80 //需要滚动到的坐标
        //        let distance = (scrollTop - currentTop) / n//25次 每次动多少
        //        console.log(currentTop)
        //        console.log(scrollTop)
        //        console.log(distance)
        //        let i = 0
        //        let id = setInterval(()=> {
        //            if (i===n) {
        //                window.clearInterval(id)
        //                return
        //            }
        //            i = i + 1
        //            window.scrollTo(0,currentTop + distance * i)
        //        },duration)

        //    }
        // }
        
    </script>
</body>
</html>